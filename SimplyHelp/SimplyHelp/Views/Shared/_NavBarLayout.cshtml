@using Microsoft.AspNetCore.Http
@{
    var userName = Context.Session.GetString("userName");
    var userId = Context.Session.GetString("userId");
    var userRole = Context.Session.GetString("userRole");

    if (userName == null)
    {
        // Context.Response.Redirect("/Account");

    }
}

<nav class="navbar navbar-expand-sm navbar-expand-md navbar-light bg-light navbar-fixed-top" style="background-color: silver">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a asp-area="" asp-controller="Home" asp-action="Index" class="navbar-brand" style="color: red; font: 25pt bold; 
                    text-shadow: -1px 0 black, 0 1px black, 0 1px black, 0 -1px black;">SimplyHelp</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a asp-area="" asp-controller="Home" asp-action="Index"><span class="glyphicon glyphicon-home"></span>  Home</a></li>
                <li><a asp-area="" asp-controller="Subscription" asp-action="Add"><span class="glyphicon glyphicon-edit"></span>  Subscribe</a></li>
                <li><a asp-area="" asp-controller="Home" asp-action="Contact"><span class="glyphicon glyphicon-comment"></span>  Contact</a></li>
                <li class="nav-item dropdown">
                    <a class="navbar-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-globe-americas"></i> WebLinks<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="https://www.fema.gov/contact-us" target="_blank">FEMA</a></li>
                        <li><a href="https://www.redcross.org/get-help.html" target="_blank">Anerican Red Cross</a></li>
                        <li><a href="https://www.disasterassistance.gov/" target="_blank">DisasterAssitance.gov</a></li>
                        <li><a href="https://www.usa.gov/disaster-financial-help" target="_blank">USA.gov</a></li>
                        <li><a href="https://www.benefits.gov/benefit/4418" target="_blank">Benefits.gov</a></li>
                        <li><a href="https://www.catholiccharitiesusa.org/find-help/" target="_blank">Catholic Charities USA</a></li>
                        <li><a href="https://www.salvationarmyusa.org/usn/contact/" target="_blank">The Salvation Army USA</a></li>
                        <li><a href="https://www.hud.gov/info/disasterresources" target="_blank">HUD</a></li>
                        <li><a href="https://www.americares.org/contact-us/" target="_blank">americares</a></li>
                    </ul>
                </li>
                <li><a asp-area="" asp-controller="Home" asp-action="Tweet"><i class="fab fa-twitter"></i>  Twitter</a></li>
            </ul>

            @if (userName != null)
            {
                if (userRole == "3")
                {
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a asp-area="" asp-controller="User" asp-action="Index">
                                <span class="glyphicon glyphicon-user"></span>
                                <strong>@userName</strong>
                            </a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <span class="glyphicon glyphicon-chevron-down"></span>
                            </a>
                            <ul class="dropdown-menu">
                                @*<li><a asp-area="" asp-controller="Userdetails" asp-action="index"><span class="glyphicon glyphicon-log-in"></span> My Profile</a></li>*@
                                <li><a asp-area="" asp-controller="Account" asp-action="Logout" id="reset" onclick="reset_counter()"><span class="glyphicon glyphicon-log-in"></span>  Logout</a></li>
                            </ul>
                        </li>
                        @*<li><a asp-area="" asp-controller="Account" asp-action="index"><span class="glyphicon glyphicon-user"></span> @userId</a></li>*@
                    </ul>
                }
                if (userRole == "1")
                {
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a asp-area="" asp-controller="User" asp-action="Index">
                                <span class="glyphicon glyphicon-user"></span>
                                <strong>@userName</strong>
                            </a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <span class="glyphicon glyphicon-chevron-down"></span>
                            </a>
                            <ul class="dropdown-menu">
                                @*<li><a asp-area="" asp-controller="Userdetails" asp-action="index"><span class="glyphicon glyphicon-log-in"></span> My Profile</a></li>*@
                                <li><a asp-area="" asp-controller="Account" asp-action="Logout" id="reset" onclick="reset_counter()"><span class="glyphicon glyphicon-log-in"></span>  Logout</a></li>
                            </ul>
                        </li>
                        @*<li><a asp-area="" asp-controller="Account" asp-action="index"><span class="glyphicon glyphicon-user"></span> @userId</a></li>*@
                    </ul>
                }
                if (userRole == "2")
                {
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a asp-area="" asp-controller="User" asp-action="Index">
                                <span class="glyphicon glyphicon-user"></span>
                                <strong>@userName</strong>
                            </a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <span class="glyphicon glyphicon-chevron-down"></span>
                            </a>
                            <ul class="dropdown-menu">
                                @*<li><a asp-area="" asp-controller="Userdetails" asp-action="index"><span class="glyphicon glyphicon-log-in"></span> My Profile</a></li>*@
                                <li><a asp-area="" asp-controller="Account" asp-action="Logout" id="reset" onclick="reset_counter()"><span class="glyphicon glyphicon-log-in"></span>  Logout</a></li>
                            </ul>
                        </li>
                        @*<li><a asp-area="" asp-controller="Account" asp-action="index"><span class="glyphicon glyphicon-user"></span> @userId</a></li>*@
                    </ul>
                }

            }
            else
            {
                <ul class="nav navbar-nav navbar-right">
                    <li><a asp-area="" asp-controller="Account" asp-action="Index"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                    <li><a asp-area="" asp-controller="Account" asp-action="Registration"><span class="glyphicon glyphicon-log-in"></span> Register</a></li>
                </ul>
            }

            @*<ul class="nav navbar-nav navbar-right">
            <li><a asp-controller="Account" asp-action="Login">Log in</a></li>
        </ul>*@
        </div>
    </div>
</nav>
<script>
     

    //window.addEventListener('beforeunload', function (e) { 
    //        //e.preventDefault(); 
    //    //e.returnValue = ''; 
    //    reset_counter();
    //}); 
    

</script>